if("undefined"===typeof ImageDisplay)var ImageDisplay={init:function(){this.viewer||(this.viewer=new ImageDisplay.Viewer,this.viewer.init())},openViewer:function(g){this.viewer.show();this.viewer.showImage(g)}};ImageDisplay.Image=function(g,b,e){function d(){return"scale("+h+")translate("+c.x+"px,"+c.y+"px)"}function f(){for(var a=g,c=-1;null!=(a=a.previousSibling);)c++;return c}function l(){var a=$('<img style="display:none" />');a.load(function(){$(b).attr("src",$(this).attr("src"))});a.attr("src",$(b).attr("data-src"))}function m(a){h-=a.deltaY*ImageDisplay.Image.ZOOM_SPEED/100;h<ImageDisplay.Image.ZOOM_MIN&&(h=ImageDisplay.Image.ZOOM_MIN);h>ImageDisplay.Image.ZOOM_MAX&&(h=ImageDisplay.Image.ZOOM_MAX);
$(b).css("transform",d())}function n(a){k&&(c.x-=c.mouseX-a.clientX,c.y-=c.mouseY-a.clientY,c.mouseX=a.clientX,c.mouseY=a.clientY,$(b).css("transform",d()))}function p(a){a.addEventListener("mousewheel",m.bind(this),!0)}function q(a){$(a).on("selectstart",!1);$(b).on("dragstart",!1);a.addEventListener("mousemove",n.bind(this),!0);a.addEventListener("mousedown",function(a){k=!0;c.mouseX=a.clientX;c.mouseY=a.clientY},!0);a.addEventListener("mouseup",function(){k=!1},!0)}var h=1,k=!1,c={x:0,y:0,mouseX:0,
mouseY:0};this.init=function(){var a=f();g.addEventListener("click",function(){ImageDisplay.openViewer(a)},!1);p(b.parentElement);q(b.parentElement);l()};this.show=function(){$(b).addClass("current");$(e).addClass("current")};this.hide=function(){$(b).removeClass("current");$(e).removeClass("current")}};ImageDisplay.Image.ZOOM_SPEED=1;ImageDisplay.Image.ZOOM_MIN=.1;ImageDisplay.Image.ZOOM_MAX=6;ImageDisplay.Viewer=function(){function g(b){switch(b.keyCode||b.which){case 27:this.hide()}}function b(){[].forEach.call(document.getElementsByClassName("layout-image-display-gallery-image"),function(b,d){var f=document.getElementsByClassName("layout-image-display-image")[d],g=document.getElementsByClassName("element-set")[d];e.push(new ImageDisplay.Image(b,f,g));e[d].init()}.bind(this))}var e=[],d=null,f=null;this.init=function(){f=document.getElementById("image-display");f.addEventListener("keydown",
g.bind(this));b()};this.show=function(){$(f).removeClass("hidden");f.focus()};this.hide=function(){$(f).addClass("hidden");null!==d&&e[d].hide();d=null};this.showImage=function(b){b>=e.length?console.error("The image with index "+b+" does not exist."):(null!==d&&e[d].hide(),e[b].show(),d=b)}};$=jQuery;$(document).ready(function(){ImageDisplay.init()});
